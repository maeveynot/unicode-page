<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="shortcut icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="192x192" href="/favicon-192x192.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <title>unicode.page</title>
    <style>
      html {
        -webkit-text-size-adjust: none;
        font-size: 14pt;
      }
      body {
        margin: auto;
        display: flex;
      }
      #toggles {
        max-width: 14em;
        margin: 12pt;
        padding: 6pt;
        font-size: 10pt;
      }
      #script-toggles-head {
        font-weight: bold;
      }
      .toggle, #credits {
        margin: 8pt;
      }
      .togglebox {
        transform: scale(150%);
      }
      main {
        max-width: 480pt;
        padding: 4pt;
      }
      h1, #toggles, .desc, .scr {
        font-family: system-ui, "Open Sans", Roboto, "Fira Sans", Ubuntu, "Helvetica Neue", Cantarell, "Segoe UI", sans-serif;
      }
      .block {
        margin-bottom: 16pt;
      }
      .heading {
        display: flex;
        align-items: center;
        padding: 0 9pt 0 3pt;
      }
      h1 {
        font-size: 16pt;
        flex-grow: 1;
        margin: 8pt;
      }
      .scr {
        font-size: 8pt;
      }
      table {
        border-spacing: 3pt;
        width: 100%;
      }
      tr {
        height: 32pt;
      }
      td {
        padding: 0 6pt;
      }
      .chr {
        font-size: 24pt;
        text-align: center;
        min-width: 24pt;
        overflow: hidden;
      }
      .chr.Mn, .chr.Mc {
        max-width: 24pt;
      }
      .lit {
        font-family: "Operator Mono", Inconsolata, "Fira Mono", Menlo, "Source Code Pro", Consolas, "Lucida Console", Monaco, monospace;
      }
      .esc {
        font-size: 12pt;
      }
      .cp {
        max-width: 86pt;
        text-align: center;
      }
      .desc {
        width: 80%;
      }
      .txt {
        float: left;
      }
      .sc {
        float: right;
        font-size: 10pt;
      }
      .c2 { font-size: 76%; }
      .c3, .c4 { font-size: 58%; }
      .c5, .c6 { font-size: 52%; }
      .c7, .c8 { font-size: 52%; line-height: 90%; }
      .c9, .c10 { font-size: 32%; line-height: 90%; }
      .d2 { font-size: 96%; }
      .d3 { font-size: 92%; }
      .d4 { font-size: 86%; }
      .d5 { font-size: 80%; }
      .d6 { font-size: 72%; }
      .d7 { font-size: 64%; }
      .d8 { font-size: 54%; }
      .d9 { font-size: 42%; }
      @media screen and (max-width: 420px) {
        body {
          max-width: 100%;
          display: block;
        }
        #toggles {
          max-width: inherit;
        }
        td {
          padding: 0 3pt;
        }
        h1 {
          font-size: 12pt;
        }
        .sc {
          font-size: 8pt;
        }
        .c1 { font-size: 48%; }
        .c2 { font-size: 40%; }
        .c3, .c4 { font-size: 32%; }
        .c5, .c6 { font-size: 24%; }
        .c7, .c8 { font-size: 24%; line-height: 90%; }
        .c9, .c10 { font-size: 16%; line-height: 90%; }
        .desc {
          max-width: 144pt;
        }
      }
      @media screen {
        body {
          color: #131313;
          background: #fafafa;
        }
        a:link {
          color: #2b2b8a;
        }
        a:visited {
          color: #6e236e;
        }
        #toggles {
          background: #dadaff;
        }
        .lit {
          color: #565656;
          background: #e8e8e8;
        }
        .scr {
          color: #838383;
        }
      }
      @media screen and (prefers-color-scheme: dark) {
        body {
          color: #c9c9c9;
          background: #252525;
        }
        a:link {
          color: #7777ff;
        }
        a:visited {
          color: #f78ef7;
        }
        #toggles {
          background: #31314f;
        }
        .lit {
          color: #8a8a8a;
          background: #383838;
        }
      }
    </style>
  </head>
  <body>
    <section id="toggles">
      <details id="script-toggles">
        <summary id="script-toggles-head">Scripts</summary>
        <p><button id="clear">Clear</button></p>
        {% for s in scripts %}
        <p class="toggle">
          <input class="togglebox" type="checkbox" id="{{s|dom_id}}" value="{{s|dom_id}}">
          <label for="{{s|dom_id}}">{{s}}</label>
        </p>
        {% endfor %}
        <p id="credits">
          By <a href="mailto:unicode-page@maeveandrews.com">Maeve Andrews</a>.
          Check out our sister site, <a href="http://man-ascii.com">man-ascii.com</a>.
        </p>
      </details>
    </section>
    <script>
      if (getComputedStyle(document.body).display == "flex") {
        document.getElementById("script-toggles").open = true;
      }
    </script>
    <main>
      {% for t in tables %}
      <div class="block {{t.scripts|sort|map('dom_id')|join(" ")}}"
           style="display: {% if loop.index < 32 %}block{% else %}none{% endif %}">
        <div class="heading">
          <h1>{{t.block_name}}</h1>
          <p class="scr">{{t.scripts|sort|join(", ")}}</p>
        </div>
        <table>
          {% for r in t.rows %}
          <tr>
            <td class="chr {{r.category|dom_id}}">
              {% if r.is_escape %}
              <span class="lit esc">{{r.grapheme_repr}}</span>
              {% else %}
              {{r.grapheme_repr}}
              {% endif %}
            </td>
            <td class="lit cp c{{r.length}}">
              {{r.codepoints_repr}}
            </td>
            <td class="desc d{{r.desc_magnitude}}">
              <div class="txt">{{r.description}}</div>
              {% if r.shortcodes %}
              <div class="sc">
                {% for sc in r.shortcodes %}
                {# note that there is a U+2002 EN SPACE at the end of this line #}
                <span class="lit">:{{sc}}:</span>â€‚
                {% endfor %}
              </div>
              {% endif %}
            </td>
            {# <td class="category">{{r.category}}</td> #}
          </tr>
          {% endfor %}
        </table>
      </div>
      {% endfor %}
    </main>
    <script>
      const boxes = Array.prototype.slice.call(document.getElementsByClassName('togglebox'));
      const clearButton = document.getElementById("clear");

      const clearVisibility = () => {
        boxes.forEach(b => {
          b.checked = false;
        });
        document.querySelectorAll(".block").forEach(div => {
          div.style.display = "none";
        });
      };

      const updateVisibility = () => {
        const visible = new Set();
        boxes.forEach(b => {
          if (b.checked) {
            document.querySelectorAll(".block." + b.value).forEach(div => {
              visible.add(div);
            });
          }
        });
        document.querySelectorAll(".block").forEach(div => {
          div.style.display = visible.has(div) ? "block" : "none";
        });
      };

      clearButton.addEventListener("click", e => clearVisibility());
      boxes.forEach(b => {
        b.addEventListener("change", e => updateVisibility());
      });

      requestAnimationFrame(t => {
        if (!boxes.find(b => b.checked)) {
          boxes[0].checked = true;
        }
        updateVisibility();
      });
    </script>
  </body>
</html>
